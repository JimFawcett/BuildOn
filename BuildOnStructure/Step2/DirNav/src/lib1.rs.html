<pre>/////////////////////////////////////////////////////////////
// Step#2::DirNav::lib.rs - demos mock DirNav operations   //
//                                                         //
// Jim Fawcett, https://JimFawcett.github.io, 15 Jan 2021  //
/////////////////////////////////////////////////////////////


/*-----------------------------------------------
  Rust traits are similar to interfaces.

  Trait DirEvent requires implementer to be
  constructible and have members to handle
  DirNav events.

  Constructability allows DirNav to create an
  instance for a type defined by a generic 
  parameter.
*/
pub trait DirEvent {
    /*-- constructible --*/
    fn new() -&gt; Self;
    /*-- event handlers --*/
    fn do_dir(&amp;mut self, dir:&amp;str);
    fn do_file(&amp;mut self, file: &amp;str);
}

//#region : Sample App implementing DirEvent
/*-----------------------------------------------
  App is a type that implements application
  specific processing of a DirEvent sent by
  DirNav.  This is a demo for the DirNav library
  that illustrates how an application can use
  DirNav.
  -----------------------------------------------
pub struct App {
    curr_dir: String
}
impl DirEvent for App {
    fn new() -&gt; Self {
        App { curr_dir: String::new() }
    }
    fn do_dir(&amp;mut self, dir: &amp;str) {
        print!("\n  directory: {:?}",dir);
        self.curr_dir = dir.to_string();
    }
    fn do_file(&amp;mut self, file: &amp;str) {
        print!("\n    file: {:?}", file);
    }
}
*/
//#endregion

/*-----------------------------------------------
  DirNav searches directory tree looking for
  files with specified patterns (extensions).

  This is a mock type defined as an illustration
  of what Step #2 needs.
*/
pub struct DirNav&lt;T&gt; where T:DirEvent {
    app : T
}
impl&lt;T&gt; DirNav&lt;T&gt; where T:DirEvent {
    pub fn new() -&gt; DirNav&lt;T&gt; {
        DirNav {
          app: T::new()
        }
    }
    pub fn get_app(&amp;self) -&gt; &amp;T {
        &amp;self.app
    }
    pub fn start(&amp;mut self) {
        /* pretending to search a dir tree */
        self.app.do_dir("dir1");
        self.app.do_file("file1");
        self.app.do_file("file2");
        self.app.do_dir("dir2");
        self.app.do_file("file3");
    }
}

#[cfg(test)]
mod tests {
    #[test]
    fn it_works() {
        assert_eq!(2 + 2, 4);
    }
}
</pre>